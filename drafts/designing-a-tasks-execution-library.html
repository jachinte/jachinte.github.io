<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/Person">
<head>
	<meta charset="utf-8">
	<title>Miguel Jiménez - Designing a Tasks Execution Library</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="Miguel Jiménez">
	<link rel="shortcut icon" href="https://migueljimenez.co/theme/images/favicon.png">

	<!-- schema.org -->
	<meta itemprop="name" content="Miguel Jiménez">
	<meta itemprop="image" content="">
	<meta itemprop="description" content="">

	<!-- javascript -->
	<script src="https://migueljimenez.co/theme/js/jquery.min.js"></script>
	<script src="https://migueljimenez.co/theme/js/jquery.ba-throttle-debounce.min.js"></script>
	<script src="https://migueljimenez.co/theme/js/masonry.min.js"></script>
	<script src="https://migueljimenez.co/theme/js/jquery.fluidbox.min.js"></script>
	<script src="https://migueljimenez.co/theme/js/app.min.js"></script>

	<!-- styles -->
	<link rel="stylesheet" href="https://migueljimenez.co/theme/fonts/muli/stylesheet.css">
	<link rel="stylesheet" href="https://migueljimenez.co/theme/fonts/foundation-icons/foundation-icons.css" />
	<link rel="stylesheet" href="https://migueljimenez.co/theme/css/fluidbox.min.css" />
	<link rel="stylesheet" href="https://migueljimenez.co/theme/css/app.min.css" />

	<!-- feed -->
	  <link href="https://migueljimenez.co/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Miguel Jiménez ATOM Feed" />

	<!-- twitter -->
	<meta name="twitter:card" content="summary">
	<meta name="twitter:site" content="jachinte">
	<meta name="twitter:image" content="">

	<!-- twitter -->
	<meta name="twitter:creator" content="jachinte">
	<meta name="twitter:url" content="https://migueljimenez.co/drafts/designing-a-tasks-execution-library.html">
	<meta name="twitter:title" content="Designing a Tasks Execution Library">
	<meta name="twitter:description" content="I decided to create my own Java library for executing dependent tasks. After a quick Internet surf looking for a specific set of requirements, I found various unfulfilling alternatives. In this blog entry, I tell you about them and document the design and development process of ptel.">

	<!-- facebook -->
	<meta property="og:title" content="Designing a Tasks Execution Library" />
	<meta property="og:description" content="I decided to create my own Java library for executing dependent tasks. After a quick Internet surf looking for a specific set of requirements, I found various unfulfilling alternatives. In this blog entry, I tell you about them and document the design and development process of ptel." />
	<meta property="og:image" content="" />

	<link rel="stylesheet" href="https://migueljimenez.co/theme/css/prism.css">

	<!-- nomnoml diagrams -->
	<script src="https://migueljimenez.co/theme/js/dagre.min.js"></script>
	<script src="https://migueljimenez.co/theme/js/lodash.min.js"></script>
	<script src="https://migueljimenez.co/theme/js/nomnoml.js"></script>
</head>
<body class="pelican-victoria article-page">

	<p>
		<a class="show-on-focus" href="#main">Skip to content</a>
	</p>

	<div class="row">
		<section id="menu" class="xlarge-12 large-10 medium-10 small-12 small-centered columns">
			<h1 class="noicon">
				<a href="https://migueljimenez.co/index.html" title="Homepage">Miguel Jiménez</a>
			</h1>
			<nav aria-label="Main menu">
						<a href="https://migueljimenez.co/about.html" title="About">About</a>
						<a href="https://migueljimenez.co/projects.html" title="Projects">Projects</a>
				<a href="https://migueljimenez.co/resume.pdf" target="_blank" title="Resume">Resume</a>
				<br class="hide-for-medium" />
				<a href="https://migueljimenez.co/cv.pdf" target="_blank" title="Curriculum Vitae" class="active">Curriculum Vitae</a>
			</nav>
		</section>
	<section class="xlarge-12 large-10 medium-10 small-12 small-centered columns">
	</section>
	</div>

	<main id="main" role="main" tabindex="0">
		<div class="row">
			<section class="xlarge-12 large-10 medium-10 small-12 small-centered columns">
	<article class="article">
		<header>
			<h1 class="title">
				Designing a Tasks Execution Library
			</h1>
		</header>

		<nav>
			<time datetime="2017-10-29 13:06:00-07:00">
				October 29, 2017
			</time>
		</nav>

		<div class="content">
			<p><strong>TL;DR</strong></p>
<p>I was looking for an object-oriented and lightweight library for executing dependent tasks. I found several alternatives but non of them fulfilled the requirements I had in mind, so I decided to create my own library. In this blog entry I document the design and development process. You may find the code in github.com/jachinte/<a class="reference external" href="https://github.com/jachinte/ptel">ptel</a>.</p>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of contents</p>
<ul class="simple">
<li><a class="reference internal" href="#introduction" id="id1">Introduction</a></li>
<li><a class="reference internal" href="#requirements" id="id2">Requirements</a><ul>
<li><a class="reference internal" href="#functional-requirements" id="id3">Functional requirements</a></li>
<li><a class="reference internal" href="#non-functional-requirements" id="id4">Non-functional requirements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#search-results" id="id5">Search results</a></li>
<li><a class="reference internal" href="#design" id="id6">Design</a></li>
<li><a class="reference internal" href="#testing" id="id7">Testing</a></li>
<li><a class="reference internal" href="#implementation" id="id8">Implementation</a></li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id1">Introduction</a></h2>
</div>
<div class="section" id="requirements">
<h2><a class="toc-backref" href="#id2">Requirements</a></h2>
<p>In this section I describe the requirements I had in mind while looking for a library, including both the functional and non-functional requirements.</p>
<div class="section" id="functional-requirements">
<h3><a class="toc-backref" href="#id3">Functional requirements</a></h3>
<ol class="arabic simple">
<li>Tasks may depend upon successful execution of other tasks</li>
<li>In case of a task failure, subsequent tasks must cancel their execution</li>
<li>A group of tasks can be executed in parallel or sequentially</li>
<li>A task must allow others to condition its execution to one or several criteria</li>
<li>In case of a dependency cycle, the library should raise an error</li>
</ol>
</div>
<div class="section" id="non-functional-requirements">
<h3><a class="toc-backref" href="#id4">Non-functional requirements</a></h3>
<dl class="docutils">
<dt>Simple API</dt>
<dd>The job is about tasks execution and no more, so the API should be fairly simple. I shouldn't be required to know about graph algorithms or similar. The less boilerplate, the better.</dd>
<dt>Reuse of existing libraries</dt>
<dd>Graphs aren't new, of course! I'd prefer a small library reusing existing libraries for graph definition and manipulation. For example, an existing graph library is more likely to have implemented cycles detection, topological sort, visualisation and reporting facilities, etc.</dd>
<dt>Live feedback</dt>
<dd>Often, it's useful for users to see the actual progress of a set of tasks. I was thinking of something similar to <a class="reference external" href="https://docs.gradle.org/current/userguide/console.html">Gradle's console</a> or <a class="reference external" href="https://github.com/ctongfei/progressbar">ProgressBar</a>.</dd>
<dt>Object oriented library</dt>
<dd>I was looking for a clean design, with at least minimum usage of public static methods and a clear separation of concerns. I avoided, for example, centralized configuration of tasks. Instead, I wanted tasks to be responsible for their own configuration parameters and dependencies.</dd>
</dl>
</div>
</div>
<div class="section" id="search-results">
<h2><a class="toc-backref" href="#id5">Search results</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://stackoverflow.com/questions/6749255/directed-graph-processing-in-java">Directed Graph Processing in Java</a></li>
<li><a class="reference external" href="https://stackoverflow.com/questions/19538317/parallel-execution-of-graph-nodes-tasks-and-finding-critical-tasks">Parallel execution of graph nodes (Tasks) and finding critical Tasks</a></li>
<li><a class="reference external" href="https://stackoverflow.com/questions/19138212/how-to-implement-a-dag-like-scheduler-in-java">How to Implement a DAG-like Scheduler in Java?</a></li>
</ul>
<p>Some of the results are:</p>
<ul class="simple">
<li>dexecutor/<a class="reference external" href="https://github.com/dexecutor/dexecutor-core">dexecutor-core</a>: Execute Dependent/Independent tasks in a reliable way</li>
<li>linkedin/<a class="reference external" href="https://github.com/linkedin/parseq">parseq</a>: Asynchronous Java made easier</li>
<li>Petikoch/<a class="reference external" href="https://github.com/Petikoch/jtwfg">jtwfg</a>: A task wait for graph model with a deadlock detection</li>
<li>avivcarmis/<a class="reference external" href="https://github.com/avivcarmis/java-red">java-red</a>: Effective concurrency modules for Java</li>
<li>google/<a class="reference external" href="https://github.com/google/guava/wiki/ListenableFutureExplained">guava</a> (ListenableFuture): Google Core Libraries for Java</li>
</ul>
<p><a class="reference external" href="https://github.com/jizhang/micro-scheduler/blob/master/src/main/java/com/shzhangji/micro_scheduler/Container.java">This</a> is an example of usage of Google's guava library for graph flow execution.</p>
</div>
<div class="section" id="design">
<h2><a class="toc-backref" href="#id6">Design</a></h2>
<p>Requirement 3 suggests a separation of the graph definition and the execution of the tasks.</p>
</div>
<div class="section" id="testing">
<h2><a class="toc-backref" href="#id7">Testing</a></h2>
</div>
<div class="section" id="implementation">
<h2><a class="toc-backref" href="#id8">Implementation</a></h2>
<ul class="simple">
<li><a class="reference external" href="https://stackoverflow.com/questions/51574/good-java-graph-algorithm-library">Good Java graph algorithm library?</a></li>
<li><a class="reference external" href="https://github.com/jgrapht/jgrapht">jgrapht</a></li>
</ul>
<!-- ANSI codes: http://www.termsys.demon.co.uk/vtansi.htm -->
<!-- Requirements -->
<!-- Search results -->
<!-- Implementation -->
</div>

			<nav id="tags">
					<span class="label">
						<a href="https://migueljimenez.co/tag/oop.html">#oop</a>
					</span>
					<span class="label">
						<a href="https://migueljimenez.co/tag/java.html">#java</a>
					</span>
			</nav>
		</div>

		<section id="subscribe" class="full-width">
			<h2 class="noicon">
				<a href="https://migueljimenez.co/feeds/all.atom.xml" title="Subscribe using a news reader">
					<i class="fi-rss"></i> Subscribe
				</a>
				and never miss an article
			</h2>
		</section>

		<div class="comments">
			<div id="disqus_thread"></div>
			<script type="text/javascript">
			var disqus_identifier = "drafts/designing-a-tasks-execution-library.html";
			(function() {
				var dsq = document.createElement('script');
				dsq.type = 'text/javascript'; dsq.async = true;
				dsq.src = 'https://jachinte.disqus.com/embed.js';
				(document.getElementsByTagName('head')[0] ||
				 document.getElementsByTagName('body')[0]).appendChild(dsq);
			})();
			</script>
		</div>

		<footer>
			<a href="https://migueljimenez.co/index.html" title="Go back to the homepage">Home</a>
		</footer>
	</article>
	<script src="https://migueljimenez.co/theme/js/prism.min.js"></script>
			</section>
			<section id="credits" class="xlarge-12 large-10 medium-10 small-12 small-centered columns">
				2019 &copy; Miguel Jiménez
			</section>
		</div>
	</main>

	<script>
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-58451947-1']);
		_gaq.push(['_trackPageview']);
		(function() {
		  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
		  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>
</body>
</html>